<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>STP on 伏太中文技术博客</title>
        <link>https://RayFUTAI.github.ioc/tags/stp/</link>
        <description>Recent content in STP on 伏太中文技术博客</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <lastBuildDate>Mon, 26 Jan 2026 20:59:51 +0800</lastBuildDate><atom:link href="https://RayFUTAI.github.ioc/tags/stp/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>CCNA 理论：STP-Prtfast工具</title>
        <link>https://RayFUTAI.github.ioc/p/ccna-%E7%90%86%E8%AE%BAstp-prtfast%E5%B7%A5%E5%85%B7/</link>
        <pubDate>Mon, 26 Jan 2026 20:59:51 +0800</pubDate>
        
        <guid>https://RayFUTAI.github.ioc/p/ccna-%E7%90%86%E8%AE%BAstp-prtfast%E5%B7%A5%E5%85%B7/</guid>
        <description>&lt;img src="https://images.unsplash.com/photo-1599173704879-2e407aa34cde?q=80&amp;w=1470&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.1.0&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Featured image of post CCNA 理论：STP-Prtfast工具" /&gt;&lt;h1 id=&#34;1为什么要用prtfast解决收敛延迟&#34;&gt;1.为什么要用Prtfast？（解决收敛延迟）
&lt;/h1&gt;&lt;h1 id=&#34;在标准的生成树协议stp中从一个端口接入网要经历以下流程&#34;&gt;在标准的生成树协议(STP)中从一个端口接入网要经历以下流程:
&lt;/h1&gt;&lt;h2 id=&#34;blocking堵塞-listening监听-learning学习-forwarding转发&#34;&gt;Blocking(堵塞)-Listening(监听)-Learning(学习)-Forwarding(转发)
&lt;/h2&gt;&lt;h2 id=&#34;这个过程通常需要30秒&#34;&gt;这个过程通常需要30秒
&lt;/h2&gt;&lt;h2 id=&#34;场景模拟&#34;&gt;场景模拟:
&lt;/h2&gt;&lt;h4 id=&#34;如果你的一台pc连接到交换机pc启动很快网卡已经up了并开始dhcp请求但是交换机还在慢悠悠地进行stp计算处理监听状态结果就是dhcp超时网络连接失败30秒后才可以上网这对用户来说是灾难&#34;&gt;如果你的一台PC连接到交换机，pc启动很快网卡已经UP了并开始DHCP请求，但是交换机还在慢悠悠地进行STP计算（处理监听状态）结果就是DHCP超时，网络连接失败30秒后才可以上网这对用户来说是灾难！
&lt;/h4&gt;&lt;h1 id=&#34;2prtfast底层逻辑&#34;&gt;2.Prtfast底层逻辑
&lt;/h1&gt;&lt;h4 id=&#34;当你对一个接口使用prtfast后接口会跳过listening监听-learning学习阶段直接进入forwarding转发状态&#34;&gt;当你对一个接口使用Prtfast后接口会跳过Listening(监听)-Learning(学习)阶段+直接进入Forwarding(转发)状态
&lt;/h4&gt;&lt;h3 id=&#34;1瞬间up端口几乎在物理链路连通之间的同时就能转发数据包&#34;&gt;1.瞬间UP:端口几乎在物理链路连通之间的同时就能转发数据包。
&lt;/h3&gt;&lt;h3 id=&#34;2适用对象只能适用终端设备pc服务器打印机的接口&#34;&gt;2.适用对象:只能适用终端设备（pc，服务器，打印机）的接口
&lt;/h3&gt;&lt;h3 id=&#34;3禁止对象交换机集线器或者网桥&#34;&gt;3.禁止对象:交换机，集线器或者网桥
&lt;/h3&gt;&lt;h4 id=&#34;如果你在二个交换机互联的链路上开启prtfast极大概率引起广播风暴&#34;&gt;如果你在二个交换机互联的链路上开启Prtfast，极大概率引起广播风暴!!!
&lt;/h4&gt;&lt;h1 id=&#34;3配置指令&#34;&gt;3.配置指令
&lt;/h1&gt;&lt;h2 id=&#34;方式a接口配置针对特定接口&#34;&gt;方式A：接口配置（针对特定接口）
&lt;/h2&gt;&lt;h3 id=&#34;如下在交换机下&#34;&gt;如下（在交换机下）
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;interface G0/1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;spanning-tree portfast
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;方式b全局配置针对所有access端口&#34;&gt;方式B：全局配置（针对所有Access端口）
&lt;/h2&gt;&lt;h3 id=&#34;如下在交换机下-1&#34;&gt;如下（在交换机下）
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;spanning-tree portfast default
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h1 id=&#34;4进阶补丁bpdu-guard&#34;&gt;4.进阶补丁:BPDU Guard
&lt;/h1&gt;&lt;h4 id=&#34;开启了portfast-之后如果有人不小心接上了一个交换机会导致广播风暴我们要配合bpdu-guard使用&#34;&gt;开启了portfast 之后如果有人不小心接上了一个交换机会导致广播风暴，我们要配合BPDU Guard使用：
&lt;/h4&gt;&lt;h2 id=&#34;如下在交换机下-2&#34;&gt;如下（在交换机下）
&lt;/h2&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;spanning-tree bpduguard enable
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;开启这个以后portfast-端口收到bpdu包他会立即进入err-disable状态直接把物理链路掐断&#34;&gt;开启这个以后portfast 端口收到BPDU包他会立即进入err-disable状态，直接把物理链路掐断。
&lt;/h4&gt;&lt;h1 id=&#34;总结&#34;&gt;总结:
&lt;/h1&gt;&lt;h2 id=&#34;优点解决dhcp超时问题提升用户体验&#34;&gt;优点:解决DHCP超时问题，提升用户体验！
&lt;/h2&gt;&lt;h2 id=&#34;风险配置不当会导致物理环路&#34;&gt;风险:配置不当会导致物理环路!
&lt;/h2&gt;&lt;h2 id=&#34;黄金法则终端开启互联禁止必须配合bpdu-guard&#34;&gt;黄金法则：终端开启，互联禁止，必须配合BPDU Guard！
&lt;/h2&gt;</description>
        </item>
        
    </channel>
</rss>
